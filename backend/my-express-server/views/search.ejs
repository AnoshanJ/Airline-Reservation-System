<%- include("header") -%>

    <br>
    <center>
    <button><a href="/">Home</a></button>
    <button><a href="/report">Report</a></button>
    <button><a href="/booking">Booking</a></button>
    </center>
    <br>

    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <br>
    <br>
    <body>

          <script type="application/javascript">
            function tableSearch() {
                let input1,input2, filter1,filter2, table, tr, td, txtValue;
    
                //Intialising Variables
                input1 = document.getElementById("myInput1");
                input2 = document.getElementById("myInput2");
                filter1 = input1.value.toUpperCase();
                filter2 = input2.value.toUpperCase();
                table = document.getElementById("myTable");
                tr = table.getElementsByTagName("tr");
    
                for (let i = 0; i < tr.length; i++) {
                    td1 = tr[i].getElementsByTagName("td")[1];
                    td2 = tr[i].getElementsByTagName("td")[4];
                    if (td1 && td2) {
                        txtValue1 = td1.textContent || td1.innerText;
                        txtValue2 = td2.textContent || td2.innerText;
                        if ((txtValue1.toUpperCase().indexOf(filter1) > -1) && (txtValue2.toUpperCase().indexOf(filter2) > -1)) {
                            tr[i].style.display = "";
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }
    
            }
        </script>

        <div class ="container">
            <h1 class = "text=center mt-3 mb-3"><%= title %></h1>
            <hr>
            <input type="text" id="myInput1" onkeyup='tableSearch()' placeholder="Search by origin...">
            <input type="text" id="myInput2" onkeyup='tableSearch()' placeholder="Search by destination...">
            <% if(action == 'add') { %>
            <% } else { %>
                <div class ="card">
                    <div class ="card-header">
                        <div class ="row">
                            <div class ="col">Flight details</div>
                            <div class ="col"></div>
                        </div>
                    </div>
                    <div class ="card-body">
                        <div class ="table-responsive">
                            <table class="table table-bordered" id="myTable">
                                <tr>
                                  <th>Flight_ID</th>
                                  <th>Origin</th>
                                  <th>Departure_Date</th>
                                  <th>Departure_Time</th>
                                  <th>destination</th>
                                  <th>Arrival_Date</th>
                                  <th>Arrival_Time</th>                                
                                  <th>Action</th>
                                </tr>
                                <%
                                if(sampleData.length > 0)
                                {
                                  sampleData.forEach(function(data){
                                  %>
                                  <tr class="data-row" data-origin="<%= data.origin %>">
                                    <td><%= data.flight_id %></td>
                                    <td><%= data.origin %></td>
                                    <td><%= data.departure_date %></td>
                                    <td><%= data.departure_time %></td>
                                    <td><%= data.destination %></td>    
                                    <td><%= data.arrival_date %></td>
                                    <td><%= data.arrival_time %></td>
                                    <td>
                                        <a href="/Booking"><button class="btn btn-primary">Book</button></a>
                                      
                                    </td>
                                  </tr>    
                                  <%
                                  });
                                }
                                else
                                {
                                %>
                                <tr>
                                  <td colspan="5">No Data Found</td>
                                </tr>
                                <%
                                }
                                %>
                              </table>
                              
                                <!-- JavaScript code to handle filtering -->
                                <script>
                                    $(document).ready(function() {
                                    // Show all rows by default
                                    $('.data-row').show();
                                
                                    // Hide rows when filter is selected
                                    $('.dropdown-item').click(function(e) {
                                        e.preventDefault();
                                
                                        // Get selected filter
                                        var filter = $(this).data('filter');
                                
                                        // Show all rows if "all" filter is selected
                                        if (filter === 'all') {
                                        $('.data-row').show();
                                        }
                                        // Otherwise, hide rows that don't match the selected filter
                                        else {
                                        $('.data-row').hide();
                                        $('.data-row[data-origin="' + filter + '"]').show();
                                        }
                                    });
                                    });
                                </script>
                              
                        </div>
                    </div>
                </div>
            <%  } %>
        </div>
    </body>


<%- include("footer") -%>